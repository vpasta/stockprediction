{% extends "admin_base.html" %} {% block title %}Hasil Prediksi Harga Saham{%
endblock %} {% block page_title %} Hasil Prediksi Harga Saham {{ ticker }} {%
endblock %} {% block content %}

<div class="card">
  <div class="card-header">
    <h3 class="card-title">Detail Prediksi</h3>
  </div>
  <div class="card-body">
    {% with messages = get_flashed_messages(with_categories=true) %} {% if
    messages %} {% for category, message in messages %}
    <div class="message {{ category }}">{{ message }}</div>
    {% endfor %} {% endif %} {% endwith %}

    <div class="controls text-center">
      <a href="{{ url_for('train_model') }}" class="btn btn-info"
        >Latih Ulang Model</a
      >
      <a
        href="{{ url_for('preprocess', ticker=ticker) }}"
        class="btn btn-secondary"
        >Kembali ke Preprocessing</a
      >
      <a href="{{ url_for('index') }}" class="btn btn-secondary"
        >Kembali ke Unduh Data</a
      >
    </div>

    <div class="metric-display">
      Root Mean Squared Error (RMSE):
      <strong>{{ "%.4f"|format(rmse) }}</strong>
    </div>
    <div class="metric-display">
      Mean Absolute Error (MAE):
      <strong>{{ "%.4f"|format(mae) }}</strong>
    </div>
    <div class="metric-display">
      Mean Absolute Percentage Error (MAPE):
      <strong>{{ "%.2f"|format(mape) }}%</strong>
    </div>

    <h2>
      Prediksi ({{ total_predictions }} Data, Ditampilkan 20 Data Terakhir)
    </h2>
    <div class="table-responsive">
      <table class="table table-bordered table-striped prediction-table">
        <thead>
          <tr>
            <th>Tanggal</th>
            <th>Harga Aktual</th>
            <th>Harga Prediksi</th>
          </tr>
        </thead>
        <tbody>
          {% for result in prediction_results %}
          <tr>
            <td>{{ result['Date'] }}</td>
            <td>{{ result['True Price'] }}</td>
            <td>{{ result['Predicted Price'] }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>
{% endblock %}
